<html>
  <body>
    <script src="jsTest.js"></script>
    <script src="../../interpreter/js/interpreter.js"></script>
    <div id="results"></div>
    <script>
      var suite = new jsTest.TestSuite();

      suite.addTest('set number of registers', function(test) {
        var interpreter = new gristVm.Interpreter();
        test.assertEqual('Register 0 should be set to 0', 0,
                         interpreter.dump().r0);
        test.assertEqual('Register 1 should be set to 0', 0,
                         interpreter.dump().r1);
        test.assertEqual('Register 2 should be set to 0', 0,
                         interpreter.dump().r2);
        test.assertEqual('Register 3 should be set to 0', 0,
                         interpreter.dump().r3);
        test.assertEqual('Register 4 should be set to 0', 0,
                         interpreter.dump().r4);
        test.assertEqual('Register 5 should be set to 0', 0,
                         interpreter.dump().r5);
        test.assertEqual('Register 6 should be set to 0', 0,
                         interpreter.dump().r6);
        test.assertEqual('Register 7 should be set to 0', 0,
                         interpreter.dump().r7);
        test.assertEqual('Register 8 should not exist', undefined,
                         interpreter.dump().r8);

        var interpreter = new gristVm.Interpreter([], 0);
        test.assertEqual('With 0 registers, register 0 should not exist',
                         undefined, interpreter.dump().r0);

        var interpreter = new gristVm.Interpreter([], -1);
        test.assertEqual('Requesting -1 registers should default to 0',
                         undefined, interpreter.dump().r0);

        var interpreter = new gristVm.Interpreter([], 12);
        test.assertEqual('Register 11 should be set to 0', 0,
                         interpreter.dump().r11);
        test.assertEqual('Register 12 should not exist', undefined,
                         interpreter.dump().r12);

        var interpreter = new gristVm.Interpreter([], 300);
        test.assertEqual('Register 255 should be set to 0', 0,
                         interpreter.dump().r255);
        test.assertEqual('Register 256 should not exist', undefined,
                         interpreter.dump().r256);
      });

      suite.runTests(document.getElementById('results'));
    </script>
  </body>
</html>
